webpackJsonp([5],{EVLh:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Mitt"),i=a("gyMJ"),o=a("+yxM"),n=(a("mw3O"),a("Y4TK"),a("Fd2+")),c={components:{floatPage:o.a,Header:s.a},data:()=>({mId:"",code:"",name:"",thumbnail:"",releaseDate:"",releasePlace:"",releaseLanguage:"",duration:"",description:"",staffsList:"",recommendList:"",mediaNum:"",mediaId:"",mediaType:"",qjShowHide:!0,yzShowHide:!0,dsjShowHide:!0,isActive:!1,showHide:!0,colletState:1,movieflag:0,actived:null,show:!1,defaultUrl:'this.src="'+a("11cb")+'";this.onerror=null'}),created(){this.getInit()},methods:{getInit(){i.a.c2mList.getDetails(this.$route.query.id).then(e=>{if(this.mId=e.data.id,this.code=e.data.code,this.name=e.data.name,this.thumbnail=e.data.thumbnail,this.releaseDate=e.data.releaseDate,this.releasePlace=e.data.releasePlace,this.duration=e.data.duration,this.releaseLanguage=e.data.releaseLanguage,this.description=e.data.description,this.staffsList=e.data.staffs,this.mediaId=e.data.id,this.mediaType=e.data.mediaType,this.mediaNum=e.data.mediaNum,""==this.staffsList?this.yzShowHide=!1:this.yzShowHide=!0,this.mediaNum<=1){this.qjShowHide=!1,this.dsjShowHide=!0;const e=this.releaseDate,t=new Date,a={year:t.getFullYear(),month:t.getMonth()+1,date:t.getDate()};a.month<10&&(a.month="0"+a.month),a.date<10&&(a.date="0"+a.date);const s=a.year+"-"+a.month+"-"+a.date,i=new RegExp("-","g");new Date(e.replace(i,"/"))>new Date(s.replace(i,"/"))&&(this.movieflag=1,this.handleCheckOrder())}else this.qjShowHide=!0,this.dsjShowHide=!1;this.recommendList=e.data.recommendList,this.handleCheckCollect()}).catch(e=>{console.log(e)})},toggleDispaly(){this.showHide=!this.showHide,this.isActive=!this.isActive},getDetailsData(e){i.a.c2mList.getDetails(e).then(e=>{const t=this;if(t.mId=e.data.id,t.code=e.data.code,t.name=e.data.name,t.thumbnail=e.data.thumbnail,t.releaseDate=e.data.releaseDate,t.releasePlace=e.data.releasePlace,t.duration=e.data.duration,t.releaseLanguage=e.data.releaseLanguage,t.description=e.data.description,t.staffsList=e.data.staffs,t.mediaId=e.data.id,t.mediaType=e.data.mediaType,t.mediaNum=e.data.mediaNum,""==t.staffsList?t.yzShowHide=!1:t.yzShowHide=!0,t.mediaNum<=1){t.qjShowHide=!1,t.dsjShowHide=!0;const e=t.releaseDate,a=new Date,s={year:a.getFullYear(),month:a.getMonth()+1,date:a.getDate()};s.month<10&&(s.month="0"+s.month),s.date<10&&(s.date="0"+s.date);const i=s.year+"-"+s.month+"-"+s.date,o=new RegExp("-","g");new Date(e.replace(o,"/"))>new Date(i.replace(o,"/"))&&(t.movieflag=1,t.handleCheckOrder())}else t.qjShowHide=!0,t.dsjShowHide=!1;t.recommendList=e.data.recommendList,t.$refs.pageScroll.scrollTop=0,t.handleCheckCollect()}).catch(e=>{console.log(e)})},handleAddCollect(){const e=this;mc.userGetInfo(function(t){if(1==t.state){const a=t.data.id,s=t.data.changyanUserId,o=t.data.nickname;if(localStorage.setItem("userAccount",a),localStorage.setItem("changyanUserId",s),localStorage.setItem("nickname",o),a){const t="mediaId="+e.mediaId+"&mediaType="+e.mediaType;i.a.c2mList.getAddCollect(a,t).then(t=>{200==t.code?(e.colletState=2,e.$toast("收藏成功")):e.$toast(t.message)}).catch(e=>{console.log(e)})}}else 0==t.state&&n.b.confirm({title:"请先登录",message:"登录后记得在设备页面绑定哦"}).then(()=>{mc.userLogin(function(e){})}).catch(()=>{})})},handleCancelCollect(){const e=this;mc.userGetInfo(function(t){if(1==t.state){const a=t.data.id,s=t.data.changyanUserId,o=t.data.nickname;if(localStorage.setItem("userAccount",a),localStorage.setItem("changyanUserId",s),localStorage.setItem("nickname",o),a){const t="mediaId="+e.mediaId;i.a.c2mList.getCancelCollect(a,t).then(t=>{e.colletState=1,e.$toast("取消成功")}).catch(e=>{console.log(e)})}}else 0==t.state&&n.b.confirm({title:"请先登录",message:"登录后记得在设备页面绑定哦"}).then(()=>{mc.userLogin(function(e){})}).catch(()=>{})})},handleCheckCollect(){const e=localStorage.getItem("userAccount"),t="mediaId="+this.mediaId+"&mediaType="+this.mediaType;i.a.c2mList.getCheckCollect(e,t).then(e=>{e.data?this.colletState=2:this.colletState=1}).catch(e=>{console.log(e)})},getAddOrder(){const e=this;mc.userGetInfo(function(t){if(1==t.state){const a=t.data.id,s=t.data.changyanUserId,o=t.data.nickname;if(localStorage.setItem("userAccount",a),localStorage.setItem("changyanUserId",s),localStorage.setItem("nickname",o),a){const t="mediaId="+e.mediaId+"&mediaType="+e.mediaType+"&mediaName="+e.name;i.a.c2mList.getAddOrderList(a,t).then(t=>{if(200==t.code){e.movieflag=2;const t=window.location.href,a=e.releaseDate+" 19:00:00";mc.addSubscribeNotice({tv_program_name:e.name,time:a,h5:t,mId:e.mId}),e.$toast.success("预约成功")}else e.$toast(t.message)}).catch(e=>{console.log("错误信息"),console.log(e)})}}else 0==t.state&&n.b.confirm({title:"请先登录",message:"登录后记得在设备页面绑定哦"}).then(()=>{mc.userLogin(function(e){})}).catch(()=>{})})},getCancelOrder(){const e=this;mc.userGetInfo(function(t){if(1==t.state){const a=t.data.id,s=t.data.changyanUserId,o=t.data.nickname;if(localStorage.setItem("userAccount",a),localStorage.setItem("changyanUserId",s),localStorage.setItem("nickname",o),a){const t="mediaId="+e.mediaId+"&mediaType="+e.mediaType;i.a.c2mList.getCancelOrderList(a,t).then(t=>{e.movieflag=1,mc.removeSubscribeNotice({mId:e.mId}),e.$toast.success("取消成功")}).catch(e=>{console.log("错误信息"),console.log(e)})}}else 0==t.state&&n.b.confirm({title:"请先登录",message:"登录后记得在设备页面绑定哦"}).then(()=>{mc.userLogin(function(e){})}).catch(()=>{})})},handleCheckOrder(){const e=localStorage.getItem("userAccount"),t="mediaId="+this.mediaId+"&mediaType="+this.mediaType;i.a.c2mList.getCheckOrder(e,t).then(e=>{e.data?(this.movieflag=2,this.dyShowHide=!1):(this.movieflag=1,this.dyShowHide=!1)}).catch(e=>{console.log(e)})},getPlayVod(e){this.actived=e;const t=this;mc.userGetInfo(function(a){if(1==a.state){const s=a.data.id,o=a.data.changyanUserId,c=a.data.nickname;if(localStorage.setItem("userAccount",s),localStorage.setItem("changyanUserId",o),localStorage.setItem("nickname",c),s){if(localStorage.getItem("iptvAccount")){const a={type:"series",code:t.code,index:e};i.a.c2mList.getUserKey(s,{params:a}).then(e=>{200==e.code?t.$toast.success("投屏成功"):509==e.code?t.$toast("电视已断开链接，或该页面不支持远程遥控"):t.$toast(e.message)}).catch(e=>{console.log(e)})}else n.b.confirm({title:"您尚未绑定长江云TV",message:"请先绑定后，再进行操作"}).then(()=>{t.$router.push({path:"/userBind"})}).catch(()=>{})}}else 0==a.state&&n.b.confirm({title:"请先登录",message:"登录后记得在设备页面绑定哦"}).then(()=>{mc.userLogin(function(e){})}).catch(()=>{})})},getPlayMovie(){const e=this;mc.userGetInfo(function(t){if(1==t.state){const a=t.data.id,s=t.data.changyanUserId,o=t.data.nickname;if(localStorage.setItem("userAccount",a),localStorage.setItem("changyanUserId",s),localStorage.setItem("nickname",o),a){if(localStorage.getItem("iptvAccount")){const t={type:"vod",code:e.code};i.a.c2mList.getUserKey(a,{params:t}).then(t=>{200==t.code?e.$toast.success("投屏成功"):509==t.code?e.$toast("电视已断开链接，或该页面不支持远程遥控"):e.$toast(t.message)}).catch(e=>{console.log(e)})}else n.b.confirm({title:"您尚未绑定长江云TV",message:"请先绑定后，再进行操作"}).then(()=>{e.$router.push({path:"/userBind"})}).catch(()=>{})}}else 0==t.state&&n.b.confirm({title:"请先登录",message:"登录后记得在设备页面绑定哦"}).then(()=>{mc.userLogin(function(e){})}).catch(()=>{})})},handleShare(){const e=window.location.href.replace(/[|\#|]/g,"");mc.sharePanel({title:this.name,content:this.description,image:this.thumbnail,url:e})},showPopup(){this.show=!0}}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Header"),e._v(" "),s("div",{ref:"pageScroll",staticStyle:{height:"100vh",overflow:"scroll","-webkit-overflow-scrolling":"touch"}},[s("div",{staticClass:"detail-top"},[s("div",{staticClass:"detail-img"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.thumbnail?e.thumbnail:e.defaultUrl,expression:"thumbnail?thumbnail:defaultUrl"}],attrs:{onerror:e.defaultUrl}})]),e._v(" "),s("div",{staticClass:"detail-info"},[s("h2",[e._v(e._s(e.name))]),e._v(" "),s("p",[e._v(e._s(e.releaseLanguage)+"/"+e._s(e.releasePlace)+"/"+e._s(e.duration)+"分钟")]),e._v(" "),s("p",[e._v(e._s(e.releaseDate)+"/上映")])])]),e._v(" "),s("div",{staticClass:"share-btn"},[1==e.colletState?s("div",[s("span",{on:{click:function(t){return e.handleAddCollect()}}},[s("i",{staticClass:"collect"}),e._v("收藏")]),s("em",{staticStyle:{color:"#999"}},[e._v("|")]),e._v(" "),s("span",{on:{click:function(t){return e.handleShare()}}},[s("i",{staticClass:"share"}),e._v("分享")])]):e._e(),e._v(" "),2==e.colletState?s("div",[s("span",{on:{click:function(t){return e.handleCancelCollect()}}},[s("i",{staticClass:"actived"}),e._v("已收藏")]),s("em",{staticStyle:{color:"#999"}},[e._v("|")]),e._v(" "),s("span",{on:{click:function(t){return e.handleShare()}}},[s("i",{staticClass:"share"}),e._v("分享")])]):e._e()]),e._v(" "),s("div",{staticClass:"movie-info"},[s("h2",[e._v("影片介绍")]),e._v(" "),s("p",{class:{actived:e.isActive},on:{click:function(t){return e.toggleDispaly()}}},[e._v(e._s(e.description))]),e._v(" "),s("div",{staticClass:"open-tips",on:{click:function(t){return e.toggleDispaly()}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.showHide?a("cDzJ"):a("Hsrm"),expression:'showHide?require("../assets/images/showMy.png"):require("../assets/images/hideMy.png")'}]})])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.yzShowHide,expression:"yzShowHide"}],staticClass:"actor-list"},[s("h2",[e._v("演职人员")]),e._v(" "),s("ul",e._l(e.staffsList,function(t){return s("li",{key:t.index},[s("p",[e._v(e._s(t.name))]),e._v(" "),s("span",[e._v(e._s(t.profession))])])}),0)]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.qjShowHide,expression:"qjShowHide"}],staticClass:"synopsis"},[s("van-cell",{attrs:{"is-link":""},on:{click:e.showPopup}},[e._v("剧集")]),e._v(" "),s("van-popup",{style:{height:"auto"},attrs:{position:"bottom",closeable:""},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[s("div",{staticClass:"s-list"},[s("h2",[e._v("剧集")]),e._v(" "),e._l(e.mediaNum,function(t,a){return s("li",{key:t.index,class:{actived:a==e.actived},on:{click:function(t){return e.getPlayVod(a)}}},[e._v(e._s(a+1)+"\r\n                    ")])})],2)]),e._v(" "),s("div",{staticClass:"synopsis-list"},[s("ul",e._l(e.mediaNum,function(t,a){return s("li",{key:t.index,class:{actived:a==e.actived},on:{click:function(t){return e.getPlayVod(a)}}},[e._v(e._s(a+1))])}),0)])],1),e._v(" "),s("div",{staticClass:"relevant"},[s("h2",[e._v("相关推荐")]),e._v(" "),s("ul",{staticClass:"hot-list"},e._l(e.recommendList,function(t,a){return s("li",{key:t.index,on:{click:function(a){return e.getDetailsData(t.id)}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.recommendList[a].thumbnail?e.recommendList[a].thumbnail:e.defaultUrl,expression:"recommendList[index].thumbnail?recommendList[index].thumbnail:defaultUrl"}],attrs:{onerror:e.defaultUrl}}),e._v(" "),s("p",[e._v(e._s(e.recommendList[a].name))])])}),0)])]),e._v(" "),0==e.movieflag?s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:e.dsjShowHide,expression:"dsjShowHide"}],staticClass:"see-btn",on:{click:function(t){return e.getPlayMovie()}}},[e._v("\r\n                电视播放\r\n            ")])]):e._e(),e._v(" "),1==e.movieflag?s("div",[s("div",{staticClass:"see-btn",on:{click:function(t){return e.getAddOrder()}}},[e._v("\r\n                预约\r\n            ")])]):e._e(),e._v(" "),2==e.movieflag?s("div",[s("div",{staticClass:"see-btn",on:{click:function(t){return e.getCancelOrder()}}},[e._v("\r\n                已预约\r\n            ")])]):e._e(),e._v(" "),s("div",{staticClass:"float-contr",attrs:{id:"float-contr"}},[s("float-page")],1)],1)},staticRenderFns:[]};var d=a("VU/8")(c,l,!1,function(e){a("QgGz")},"data-v-5ced4e77",null);t.default=d.exports},Hsrm:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFASURBVEhLYxgFo2DQA0Z2/8oNnKVbrjEwMolCxagOGNmc0hbyL/v/nw+IuQrXX2ZgZBSEylENICxZ8vcfz9Rnn0BsruINV6hpGSObe+5ysCWLfv5hEpGLYGBhU+fpvfmampahWMIoKBUIFWcAW9Z5+QXCMiYRqAzJgBluyYLvv1EsgQFmViW4ZeXbb5BjGTO7b/k6uCV8Yt5QcUxAgWUsRFsCAyDLWs48QbJMHCqDE7CwB9dvAVsy/+svoiyBASYWeZhl3DUH7uKzjBXFEh5hV6g48YAIy1jZIzp2gS2Z+/EHWZbAANAy7sbjD+GWMTFLQ2XQLOEWcICKkw+AhsMtA9Jgy9hcMpeALZn19htVLIEBJMs4Yvv3M7CaBk3knfzkIyMnrxVUCfUA0DLOtLknmMRVEiACNCyJR8EoQAMMDACOT7HV1kBZJQAAAABJRU5ErkJggg=="},QgGz:function(e,t){},cDzJ:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFbSURBVEhLYxgFo4BugJFPVBTMYLVLSOBuOnGCUUhaGixARcCsZmXFN+fjR464iROZ2Ozi41lUzM15Go4do6ZlzFoODtxVe/YwcvHxMfIICzOADOed9PAh/7L//0E0NSwDWcK38McPkJlclbt2MTCzsoIlwJb1370Lt0xEXh4sQQZg0XV1xWoJDDDyi4vDLZvy5Ak5loEtWfTrF9iS0i1bMCyBAUosYzH09ka1hIUFKoUdgCzj6blxA2YZk5iSElQKJwBbsvj3b7AlhevWEbQEBhh5RUTglk1/8QKfZRiWMDEzQ6WIA8RYxmIaGAizhDNn+XKSLYEBsGVdV67ALZNUV4dKQSxZ8ucP3BJGRkaoFHmAkVtQEG7ZzNevQZaxWkZEUNUSGECxbO6nT3xL//0DW5K5cCHVLIEBsGWdly/zAS2gmSVwwCsqyt197RpX0YYNtLNkFIwC6gAGBgDFLLxZ1KPBzQAAAABJRU5ErkJggg=="}});